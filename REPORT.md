### Звіт про аналіз коду BadStoreApp.java

| Категорія | Де саме | Проблема | Чому це погано | Як виправити |
| :--- | :--- | :--- | :--- | :--- |
| **Security** | `login`, `buy`, `getPrice`, `buildReport` | SQL Ін'єкції (конкатенація рядків у SQL) | Зловмисник може отримати доступ до даних, видалити їх або обійти автентифікацію. | Використовувати `PreparedStatement` з параметрами (`?`). |
| **Security** | Рядок 39: `cache.put("pw:" + email, password);` | Зберігання паролів у відкритому вигляді | Якщо кеш або пам'ять буде скомпрометовано, паролі користувачів стануть відомі зловмиснику. | Ніколи не зберігати паролі у відкритому вигляді. Використовувати хешування (наприклад, BCrypt). |
| **Correctness** | Рядок 35: `if (email == "admin@local")` | Порівняння рядків через `==` | У Java `==` порівнює посилання на об'єкти, а не їхній вміст. Це може призвести до хибного результату, навіть якщо рядки однакові. | Використовувати метод `.equals()`: `email.equals("admin@local")`. |
| **Correctness** | Рядок 137: `for (int i = 0; i <= lines.size(); i++)` | Помилка "Off-by-one" (вихід за межі масиву) | Умова `i <= lines.size()` призведе до `IndexOutOfBoundsException`, оскільки індекси в списку йдуть до `size() - 1`. | Змінити умову на `i < lines.size()`. |
| **Architecture** | `query` та `update` методи | Витік ресурсів (Connection, Statement не закриваються) | Кожне звернення до БД відкриває нове з'єднання і не закриває його. Це швидко вичерпає ліміт з'єднань БД і програма перестане працювати. | Використовувати конструкцію `try-with-resources` для автоматичного закриття ресурсів. |
| **Security** | Рядки 12-14: `DB_USER`, `DB_PASS` | Хардкод конфіденційних даних | Паролі до бази даних знаходяться прямо в коді. Кожен, хто має доступ до сирців, має доступ до БД. | Використовувати змінні оточення (environment variables) або захищені конфіг-файли. |
| **Security** | Рядок 33: `System.out.println("[DEBUG] login email=" + email + " pass=" + password);` | Логування паролів | Паролі користувачів записуються в консоль/логи. Це грубе порушення безпеки. | Видалити логування паролів або маскувати їх. |

### Висновок
Найкритичнішою проблемою є **SQL Ін'єкції** в поєднанні з **витоком ресурсів**. 
1. **SQL Ін'єкції** дозволяють повністю скомпрометувати базу даних (викрасти дані всіх користувачів).
2. **Витік ресурсів** робить додаток нестабільним: він перестане працювати під мінімальним навантаженням через вичерпання ліміту з'єднань. 
Також використання `==` для рядків та помилка в циклі (`IndexOutOfBoundsException`) роблять базову функціональність (логін та звіти) непрацездатною в реальних умовах.
